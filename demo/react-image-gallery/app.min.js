var Swipeable=React.createClass({displayName:"Swipeable",propTypes:{onSwiped:React.PropTypes.func,onSwipingUp:React.PropTypes.func,onSwipingRight:React.PropTypes.func,onSwipingDown:React.PropTypes.func,onSwipingLeft:React.PropTypes.func,onSwipedUp:React.PropTypes.func,onSwipedRight:React.PropTypes.func,onSwipedDown:React.PropTypes.func,onSwipedLeft:React.PropTypes.func,flickThreshold:React.PropTypes.number,delta:React.PropTypes.number},getInitialState:function(){return{x:null,y:null,swiping:!1,start:0}},getDefaultProps:function(){return{flickThreshold:.6,delta:10}},calculatePos:function(e){var t=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY,i=this.state.x-t,s=this.state.y-a,n=Math.abs(i),l=Math.abs(s);return{deltaX:i,deltaY:s,absX:n,absY:l}},touchStart:function(e){e.touches.length>1||this.setState({start:Date.now(),x:e.touches[0].clientX,y:e.touches[0].clientY,swiping:!1})},touchMove:function(e){if(this.state.x&&this.state.y&&!(e.touches.length>1)){var t=!1,a=this.calculatePos(e);a.absX<this.props.delta&&a.absY<this.props.delta||(a.absX>a.absY?a.deltaX>0?this.props.onSwipingLeft&&(this.props.onSwipingLeft(e,a.absX),t=!0):this.props.onSwipingRight&&(this.props.onSwipingRight(e,a.absX),t=!0):a.deltaY>0?this.props.onSwipingUp&&(this.props.onSwipingUp(e,a.absY),t=!0):this.props.onSwipingDown&&(this.props.onSwipingDown(e,a.absY),t=!0),this.setState({swiping:!0}),t&&e.preventDefault())}},touchEnd:function(e){if(this.state.swiping){var t=this.calculatePos(e),a=Date.now()-this.state.start,i=Math.sqrt(t.absX*t.absX+t.absY*t.absY)/a,s=i>this.props.flickThreshold;this.props.onSwiped&&this.props.onSwiped(e,t.deltaX,t.deltaY,s),t.absX>t.absY?t.deltaX>0?this.props.onSwipedLeft&&this.props.onSwipedLeft(e,t.deltaX):this.props.onSwipedRight&&this.props.onSwipedRight(e,t.deltaX):t.deltaY>0?this.props.onSwipedUp&&this.props.onSwipedUp(e,t.deltaY):this.props.onSwipedDown&&this.props.onSwipedDown(e,t.deltaY)}this.setState(this.getInitialState())},render:function(){return React.createElement("div",React.__spread({},this.props,{onTouchStart:this.touchStart,onTouchMove:this.touchMove,onTouchEnd:this.touchEnd}),this.props.children)}}),ImageGallery=React.createClass({mixins:[React.addons.PureRenderMixin],displayName:"ImageGallery",propTypes:{items:React.PropTypes.array.isRequired,showThumbnails:React.PropTypes.bool,showBullets:React.PropTypes.bool,autoPlay:React.PropTypes.bool,lazyLoad:React.PropTypes.bool,slideInterval:React.PropTypes.number,onSlide:React.PropTypes.func},getDefaultProps:function(){return{lazyLoad:!0,showThumbnails:!0,showBullets:!1,autoPlay:!1,slideInterval:4e3}},getInitialState:function(){return{currentIndex:0,thumbnailsTranslateX:0,containerWidth:0}},componentDidUpdate:function(e,t){if((t.containerWidth!==this.state.containerWidth||e.showThumbnails!==this.props.showThumbnails)&&this._setThumbnailsTranslateX(-this._getScrollX(this.state.currentIndex>0?1:0)*this.state.currentIndex),t.currentIndex!==this.state.currentIndex)if(this.props.onSlide&&this.props.onSlide(this.state.currentIndex),0===this.state.currentIndex)this._setThumbnailsTranslateX(0);else{var a=Math.abs(t.currentIndex-this.state.currentIndex),i=this._getScrollX(a);i>0&&(t.currentIndex<this.state.currentIndex?this._setThumbnailsTranslateX(this.state.thumbnailsTranslateX-i):t.currentIndex>this.state.currentIndex&&this._setThumbnailsTranslateX(this.state.thumbnailsTranslateX+i))}},componentDidMount:function(){this._handleResize(),this.props.autoPlay&&this.play(),window.addEventListener("resize",this._handleResize)},componentWillUnmount:function(){window.removeEventListener("resize",this._handleResize)},slideToIndex:function(e,t){var a=this.props.items.length-1;this.setState(0>e?{currentIndex:a}:e>a?{currentIndex:0}:{currentIndex:e}),t&&(this._intervalId&&(this.pause(),this.play()),t.preventDefault())},play:function(){this._intervalId||(this._intervalId=window.setInterval(function(){this.state.hovering||this.slideToIndex(this.state.currentIndex+1)}.bind(this),this.props.slideInterval))},pause:function(){this._intervalId&&(window.clearInterval(this._intervalId),this._intervalId=null)},_setThumbnailsTranslateX:function(e){this.setState({thumbnailsTranslateX:e})},_handleResize:function(){this.setState({containerWidth:this.getDOMNode().offsetWidth})},_getScrollX:function(e){if(this.refs.thumbnails){var t=this.refs.thumbnails.getDOMNode();if(t.scrollWidth<=this.state.containerWidth)return 0;var a=t.children.length,i=t.scrollWidth-this.state.containerWidth,s=i/(a-1);return e*s}},_handleMouseOver:function(){this.setState({hovering:!0})},_handleMouseLeave:function(){this.setState({hovering:!1})},_getAlignment:function(e){var t=this.state.currentIndex,a="";switch(e){case t-1:a="left";break;case t:a="center";break;case t+1:a="right"}return this.props.items.length>=3&&(0===e&&t===this.props.items.length-1?a="right":e===this.props.items.length-1&&0===t&&(a="left")),a},render:function(){var e=this.state.currentIndex,t={MozTransform:"translate3d("+this.state.thumbnailsTranslateX+"px, 0, 0)",WebkitTransform:"translate3d("+this.state.thumbnailsTranslateX+"px, 0, 0)",OTransform:"translate3d("+this.state.thumbnailsTranslateX+"px, 0, 0)",msTransform:"translate3d("+this.state.thumbnailsTranslateX+"px, 0, 0)",transform:"translate3d("+this.state.thumbnailsTranslateX+"px, 0, 0)"},a=[],i=[],s=[];return this.props.items.map(function(t,n){var l=this._getAlignment(n);this.props.lazyLoad?l&&a.push(React.createElement("div",{key:n,className:"image-gallery-slide "+l},React.createElement("img",{src:t.original}))):a.push(React.createElement("div",{key:n,className:"image-gallery-slide "+l},React.createElement("img",{src:t.original}))),this.props.showThumbnails&&i.push(React.createElement("a",{key:n,className:"image-gallery-thumbnail "+(e===n?"active":""),onTouchStart:this.slideToIndex.bind(this,n),onClick:this.slideToIndex.bind(this,n)},React.createElement("img",{src:t.thumbnail}))),this.props.showBullets&&s.push(React.createElement("li",{key:n,className:"image-gallery-bullet "+(e===n?"active":""),onTouchStart:this.slideToIndex.bind(this,n),onClick:this.slideToIndex.bind(this,n)}))}.bind(this)),React.createElement("section",{className:"image-gallery"},React.createElement("div",{onMouseOver:this._handleMouseOver,onMouseLeave:this._handleMouseLeave,className:"image-gallery-content"},React.createElement("a",{className:"image-gallery-left-nav",onTouchStart:this.slideToIndex.bind(this,e-1),onClick:this.slideToIndex.bind(this,e-1)}),React.createElement("a",{className:"image-gallery-right-nav",onTouchStart:this.slideToIndex.bind(this,e+1),onClick:this.slideToIndex.bind(this,e+1)}),React.createElement(Swipeable,{onSwipedLeft:this.slideToIndex.bind(this,e+1),onSwipedRight:this.slideToIndex.bind(this,e-1)},React.createElement("div",{className:"image-gallery-slides"},a)),this.props.showBullets&&React.createElement("div",{className:"image-gallery-bullets"},React.createElement("ul",{className:"image-gallery-bullets-container"},s))),this.props.showThumbnails&&React.createElement("div",{className:"image-gallery-thumbnails"},React.createElement("div",{ref:"thumbnails",className:"image-gallery-thumbnails-container",style:t},i)))}}),App=React.createClass({displayName:"App",mixins:[React.addons.LinkedStateMixin],getInitialState:function(){return{isPlaying:!1,slideInterval:4e3,showThumbnails:!0,showBullets:!0,currentIndex:null}},componentDidUpdate:function(e,t){this.state.slideInterval!==t.slideInterval&&(this._pauseSlider(),this._playSlider())},_pauseSlider:function(){this.refs.imageGallery&&(this.refs.imageGallery.pause(),this.setState({isPlaying:!1}))},_playSlider:function(){this.refs.imageGallery&&(this.refs.imageGallery.play(),this.setState({isPlaying:!0}))},_handleSlide:function(e){this.setState({currentIndex:e})},render:function(){var e=[{original:"http://lorempixel.com/1000/600/nature/1/",thumbnail:"http://lorempixel.com/250/150/nature/1/"},{original:"http://lorempixel.com/1000/600/nature/2/",thumbnail:"http://lorempixel.com/250/150/nature/2/"},{original:"http://lorempixel.com/1000/600/nature/3/",thumbnail:"http://lorempixel.com/250/150/nature/3/"},{original:"http://lorempixel.com/1000/600/nature/4/",thumbnail:"http://lorempixel.com/250/150/nature/4/"},{original:"http://lorempixel.com/1000/600/nature/5/",thumbnail:"http://lorempixel.com/250/150/nature/5/"},{original:"http://lorempixel.com/1000/600/nature/6/",thumbnail:"http://lorempixel.com/250/150/nature/6/"},{original:"http://lorempixel.com/1000/600/nature/7/",thumbnail:"http://lorempixel.com/250/150/nature/7/"}];return React.createElement("section",{className:"app"},React.createElement(ImageGallery,{ref:"imageGallery",items:e,lazyLoad:!1,showBullets:this.state.showBullets,showThumbnails:this.state.showThumbnails,slideInterval:parseInt(this.state.slideInterval),autoPlay:this.state.isPlaying,onSlide:this._handleSlide}),React.createElement("div",{className:"app-sandbox"},React.createElement("h2",null," Playground "),React.createElement("ul",null,React.createElement("li",null,React.createElement("a",{className:"app-button "+(this.state.isPlaying?"active":""),onClick:this._playSlider},"Play")),React.createElement("li",null,React.createElement("a",{className:"app-button "+(this.state.isPlaying?"":"active"),onClick:this._pauseSlider},"Pause")),React.createElement("li",null,React.createElement("div",null,"Slide interval"),React.createElement("input",{type:"text",placeholder:"SlideInterval",valueLink:this.linkState("slideInterval")})),React.createElement("li",null,React.createElement("input",{type:"checkbox",checkedLink:this.linkState("showBullets")},"show bullets?")),React.createElement("li",null,React.createElement("input",{type:"checkbox",checkedLink:this.linkState("showThumbnails")},"show Thumbnails?")),null!==this.state.currentIndex&&React.createElement("li",null,"Event: slid to index ",this.state.currentIndex))))}});!function(){React.render(React.createElement(App,null),document.getElementById("container"))}();
